<!DOCTYPE html>
<html xlmns:th=" https://www.thymeleaf.org">
<html>
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
	integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
	integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
	integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
	crossorigin="anonymous"></script>


<link rel="stylesheet" th:href="@{main.css}" type="text/css" />

<script src="https://kit.fontawesome.com/dcebc1a8a0.js"
	crossorigin="anonymous"></script>


<title>Home</title>

</head>
<body>

	<div class="container ">


		<form th:action="@{/all}"
			class="form-inline col-sm-10 offset-sm-1 col-lg-6  offset-lg-3 col-sm-11  mt-4  ">
			<div class="input-group input-group-search ">
				<div class="input-group-prepend">

					<select id="actionSelect" class="border border-grey">
						<option th:value="title">Title</option>
						<option th:value="author">Author</option>
						<option selected th:value="all">All</option>
					</select>

				</div>
				<input type="search" class="form-control" placeholder="Search..."
					aria-label="Search" aria-describedby="search-button-addon"
					name="query">
				<div class="input-group-append">
					<button class="btn btn-danger" type="submit"
						id="search-button-addon">&#128269;</button>
				</div>
			</div>
		</form>


		<div
			class="card mt-3 col-sm-10 offset-sm-1 col-lg-6 offset-lg-3 border border-white">
			<ul th:each="work: ${works}" th:if="${works!=null}"
				class="text-center list-unstyled">
				<li><a th:text="${work.title}"
					th:href="@{book(key=${work.key})}"></a></li>
			</ul>
		</div>
		<!-- --------------------------------------Authors display------------------------------------------------ -->

		<div th:if="${Author!=null}" id="authorDiv"
			class="card mt-5 col-sm-10 offset-sm-1 col-lg-6 offset-lg-3   pl-0 pr-0"
			th:each="Author :${Authors}">
			<div class="card-header">
				<a th:text="${Author.authordisplay}"
					class="d-inline-block font-weight-bold cursor-pointer"
					th:href="@{works(key=${Author.authorid})}"></a> <span
					th:if="${Author.DOB!=null}" th:text="${Author.DOB}"
					class="text-muted"></span> <span th:text="'to '+${Author.DOD}"
					th:if="${Author.DOD!=null}" class="text-muted"></span>

			</div>
			<div class="card-body ">
				<div th:if="${Author.workCount>1}">
					<span th:text="${Author.workCount}+' books about ' "></span> <span
						class="text-muted" th:each="work: ${Author.works}"
						th:text="${work}+','"></span> <em
						th:text="' including '+${Author.topWork}"></em>
				</div>

				<div th:if="${Author.workCount==1}">
					<span th:text="${Author.workCount}+' book about ' "></span> <span
						class="text-muted" th:each="work: ${Author.works}"
						th:text="${work}+','"></span> <em
						th:text="' including '+${Author.topWork}"></em>
				</div>
			</div>


		</div>

		<div th:if="${Authors==null}"
			class="alert alert-warning card mt-5 col-sm-10 offset-sm-1 col-lg-6 offset-lg-3 ">Unfortunately
			we don't have information about this author</div>

	</div>


</body>

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- <script th:src="@{javaScript.js}" type="text/javascript" /> -->

<script type="text/javascript">
	$.noConflict();
	$(document).ready(function() {


		////////////////////////////////////////////geting value from elect////////////////////////////////////////

		$(document).on('change', 'select', function() {

			console.log($(this).val()); // the selected optionsâ€™s value				

			var select = $(this).val();
			// if you want to do stuff based on the OPTION element:
			var opt = $(this).find('option:selected')[0];

			$("form").attr('action', '/' + select);

		});

	}

	);
</script>


</html>
