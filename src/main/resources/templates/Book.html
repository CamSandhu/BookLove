<!DOCTYPE html>
<html xlmns:th=" https://www.thymeleaf.org">
<html>
<head>
<!-- Required meta tags -->
<meta charset="utf-8">


<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
	integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
	integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
	integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
	crossorigin="anonymous"></script>


<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" th:href="@{main.css}" type="text/css" />
<script src="https://kit.fontawesome.com/dcebc1a8a0.js"
	crossorigin="anonymous"></script>



<title>Home</title>

</head>
<body>

	<div class="container ">


		<form th:action="@{/all}"
			class="form-inline col-sm-10 offset-sm-1 col-lg-6  offset-lg-3 col-sm-11  mt-4  ">
			<div class="input-group input-group-search ">
				<div class="input-group-prepend">

					<select id="actionSelect" class="border border-grey">
						<option th:value="title">Title</option>
						<option th:value="author">Author</option>
						<option selected th:value="all">All</option>
					</select>

				</div>
				<input type="search" class="form-control" placeholder="Search..."
					aria-label="Search" aria-describedby="search-button-addon"
					name="query">
				<div class="input-group-append">
					<button class="btn btn-danger" type="submit"
						id="search-button-addon">&#128269;</button>
				</div>
			</div>
		</form>


		<!-- --------------------------------------Book info display------------------------------------------------ -->

		<div th:if="${Book!=null}" th:each="book :${Book}" id="bookDiv"
			class="offset-lg-3 col-lg-6 mt-4 border p-4 rounded ">
			<div class="row ">

				<div class="col" th:if="${book.covers!=null}">
					<img id="image" class="img-fluid  img-thumbnail" width="500"
						height="600" th:src=${"https://covers.openlibrary.org/b/id/"+book.covers[0]+"-M.jpg"} >
				</div>

				<div class="col" th:if="${book.covers==null}">
					<img id="image" class="img-fluid  img-thumbnail"
						th:src="@{images/coverNotAvailable.png}" width="400" height="500">
				</div>

				<div class="col ">

					<h6 th:text="${book.title}"></h6>

					<div th:each="subject :${book.subjects}">
						<span class="text-muted d-inline-block" th:text="${subject}">
						</span>
					</div>


					<p class="text-muted" th:text="${book.Descrip}"></p>

				</div>
			</div>
		</div>

		<div class="d-flex justify-content-center">
			<a th:if="${Book.get(Book.size()-1).offset!=0}"
				class="btn btn-dark mr-1  mt-1"
				th:href="@{books(key=${Book.get(Book.size()-1).authorId}, offset=${Book.get(Book.size()-1).offset})}">Next</a>

			<a th:if="${Book.get(Book.size()-1).offset>20}"
				class="btn btn-dark mt-1"
				th:href="@{books(key=${Book.get(Book.size()-1).authorId}, offset=${(Book.get(Book.size()-1).offset)-20})}">Previous</a>

			<a th:if="${Book.get(Book.size()-1).offset==20}"
				class="btn btn-dark mt-1"
				th:href="@{books(key=${Book.get(Book.size()-1).authorId}, offset=0)}">Previous</a>

		</div>

		<div th:if="${Book==null}"
			class="alert alert-warning card mt-5 col-sm-10 offset-sm-1 col-lg-6 offset-lg-3 ">Unfortunately
			we don't have information about this volume</div>
</body>

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script type="text/javascript">
	$.noConflict();
	$(document).ready(function() {

		////////////////////////////////////////////geting value from elect////////////////////////////////////////

		$(document).on('change', 'select', function() {

			console.log($(this).val()); // the selected optionsâ€™s value				

			var select = $(this).val();
			// if you want to do stuff based on the OPTION element:
			var opt = $(this).find('option:selected')[0];

			$("form").attr('action', '/' + select);

		});

	}

	);
</script>

</html>